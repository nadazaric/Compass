<Page 
    x:Class="travel_agent.WindowsAndPages.ArrangementsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:local="clr-namespace:travel_agent.WindowsAndPages" xmlns:controls="clr-namespace:travel_agent.Controls"
	mc:Ignorable="d"
    Title="ArrangementsPage">
	<Page.Resources>
		<DataTemplate x:Key="FirstItemTemplate">
			<Button
				Style="{StaticResource OutlineButtonStyle}"
				Width="350"
				Height="350"
				Margin="20"
				Click="OnAddNewArangementClick">
				<StackPanel
					VerticalAlignment="Center">
					<TextBlock
						HorizontalAlignment="Center"
						Text="+"
						FontSize="90"
						Margin="0 -30 0 0"
                        FontWeight="Medium"/>
					<TextBlock Text="{StaticResource String.AddNewArrangementButton}"/>
				</StackPanel>
			</Button>
		</DataTemplate>
		<DataTemplate x:Key="DefaultItemTemplate">
			<Border 
                BorderBrush="{StaticResource Color.PrimaryDark}" 
                BorderThickness="1.25" 
                CornerRadius="{StaticResource Dim.RegularCorner}"
                Margin="20"
                Height="350"
                Width="350">
				<Border.Style>
					<Style TargetType="Border">
						<Style.Triggers>
							<Trigger Property="IsMouseOver" Value="True">
								<Trigger.EnterActions>
									<BeginStoryboard>
										<Storyboard>
											<DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)" To="1.015" Duration="0:0:0.2"/>
											<DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)" To="1.015" Duration="0:0:0.2"/>
										</Storyboard>
									</BeginStoryboard>
								</Trigger.EnterActions>
								<Trigger.ExitActions>
									<BeginStoryboard>
										<Storyboard>
											<DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)" To="1" Duration="0:0:0.2"/>
											<DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)" To="1" Duration="0:0:0.2"/>
										</Storyboard>
									</BeginStoryboard>
								</Trigger.ExitActions>
							</Trigger>
						</Style.Triggers>
						<Setter Property="RenderTransform">
							<Setter.Value>
								<ScaleTransform ScaleX="1" ScaleY="1"/>
							</Setter.Value>
						</Setter>
					</Style>
				</Border.Style>
				<Grid
                    MouseLeftButtonUp="OnArrangementItemClick">
					<Grid.Clip>
						<RectangleGeometry RadiusX="6" RadiusY="6" Rect="0,0,350,350"/>
					</Grid.Clip>
					<Grid.RowDefinitions>
						<RowDefinition Height="3*" MinHeight="100"/>
						<RowDefinition Height="*" MaxHeight="200"/>
					</Grid.RowDefinitions>
					<Image
                        Grid.Row="0"
                        Source="{Binding Image}"
                        Stretch="UniformToFill"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"/>
					<DockPanel Grid.Row="1" Background="{StaticResource Color.PrimaryLight}" LastChildFill="True">
						<TextBlock
                            TextWrapping="Wrap"
                            Text="{Binding Name}"
                            VerticalAlignment="Center"
                            FontSize="20"
                            Padding="10 0"
                            FontWeight="Medium"/>
					</DockPanel>
				</Grid>
			</Border>
		</DataTemplate>
		<local:FirstItemTemplateSelector x:Key="FirstItemTemplateSelector" />
	</Page.Resources>

	<ScrollViewer VerticalScrollBarVisibility="Auto">
		<StackPanel>
			<Grid x:Name="ArrangementsSearch" Width="400" Background="{StaticResource Color.White}" Margin="0 25 0 0">
				<Grid>
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="Auto"/>
					</Grid.ColumnDefinitions>
					<controls:FancyTextBox
						x:Name="ArrangementSearchName"
						Grid.Column="0" 
                        Placeholder="{StaticResource String.SearchByNameLabel}" 
                        Padding="0 10 10 10"/>
					<Button
						x:Name="HandlePopupButton"
						Grid.Column="1"
						Padding="1.5" 
                        Content="{StaticResource String.DownButton}" 
                        VerticalAlignment="Bottom"/>
				</Grid>
			</Grid>

			<Grid 
                x:Name="NoContent"
                Height="700" 
                Visibility="Collapsed">
				<StackPanel
                    VerticalAlignment="Center"
                    HorizontalAlignment="Center">
					<TextBlock 
                        HorizontalAlignment="Center" 
                        Text="{StaticResource String.NothingLabel}"
                        FontSize="70"
                        FontWeight="Medium"
                        Foreground="{StaticResource Color.PrimaryDark}"/>
					<TextBlock 
                        FontSize="18" 
                        Text="{StaticResource String.ArrangementsNotFoundLabel}"
                        HorizontalAlignment="Center"
                        Foreground="{StaticResource Color.PrimaryDark}"
                        FontWeight="Medium"/>
				</StackPanel>
			</Grid>

			<Grid x:Name="ArrangementsListView">
				<ItemsControl
					x:Name="ArrangementsItemsCotrol"
					Margin="0 10 0 20"
					ItemsSource="{Binding Arrangements}"
					ItemTemplateSelector="{StaticResource FirstItemTemplateSelector}">
					<ItemsControl.ItemsPanel>
						<ItemsPanelTemplate>
							<WrapPanel HorizontalAlignment="Center"/>
						</ItemsPanelTemplate>
					</ItemsControl.ItemsPanel>
				</ItemsControl>
				
			</Grid>

		</StackPanel>
	</ScrollViewer>
</Page>
